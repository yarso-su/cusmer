---
import Legal from '@/layouts/Legal.astro'
import { getCollection, render } from 'astro:content'
import { format } from '@formkit/tempo'

export async function getStaticPaths() {
  const docs = await getCollection('legalDocuments')
  return docs.map(doc => ({
    params: { slug: doc.id },
    props: { doc }
  }))
}

const { doc } = Astro.props
const { data } = doc

const { Content } = await render(doc)
---

<Legal title={data.title} description={data.description}>
  <section class="mt-4 mb-4 lg:my-12 mx-auto 2xl:w-[40%] w-[90%]">
    <div class="w-fit flex items-center gap-2 mb-1 text-xs sm:text-base">
      <p class="pr-2 cborder-r text-contrast">
        {
          format({
            date: data.publishedAt,
            format: 'medium',
            locale: 'es',
            tz: 'UTC'
          })
        }
      </p>
      <span>{data.version}</span>
    </div>

    <h1
      class="leading-[1.1] text-2xl md:text-3xl font-semibold tracking-tight font-geist"
    >
      {data.title}
    </h1>
    <p class="sm:text-lg md:text-xl mt-2 md:mt-4 text-sm pb-2">
      {data.description}
    </p>
  </section>
  <section class="bg-csecondary cborder-t">
    <article id="post" class="py-8 mx-auto 2xl:w-[40%] w-[90%]">
      <Content />
    </article>
  </section>
</Legal>
